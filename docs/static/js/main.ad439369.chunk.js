(this.webpackJsonpdraw=this.webpackJsonpdraw||[]).push([[0],{12:function(t,e,i){},13:function(t,e,i){},14:function(t,e,i){},16:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),s=i(5),c=i.n(s),o=(i(12),i(2)),h=i(3),r=i(7),l=i(6),u=(i(13),i(14),i(0));function d(t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"slider",type:"range",max:t.max,min:t.min,step:"1",value:t.value,onInput:function(e){return t.change(e)}}),Object(u.jsxs)("p",{className:"title",children:[Object(u.jsx)("span",{children:"\u5c0f"}),Object(u.jsx)("span",{children:"\u5927"})]})]})}var v=function(){function t(e){Object(o.a)(this,t),this.canvas=document.getElementById(e.element),this.ctx=this.canvas.getContext("2d"),this.painting=!1,this.lastPoint={x:void 0,y:void 0},this.clear=!1,this.history=[],this.lineWidth=3}return Object(h.a)(t,[{key:"init",value:function(){var t=this;this.canvas.width=document.body.clientWidth-10,this.canvas.height=document.body.clientHeight-10,this.canvas.onmousedown=function(e){t.readyDraw(e)},this.canvas.onmousemove=function(e){t.drawing(e)},this.canvas.onmouseup=function(){t.stopDraw()}}},{key:"readyDraw",value:function(t){var e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.saveData(e),this.painting=!0;var i=t.offsetX,n=t.offsetY;this.lastPoint={x:i,y:n},this.ctx.save(),this.drawCircle(i,n,0)}},{key:"drawing",value:function(t){if(this.painting){var e={x:t.offsetX,y:t.offsetY};this.drawLine(this.lastPoint.x,this.lastPoint.y,e.x,e.y),this.lastPoint=e}}},{key:"stopDraw",value:function(){this.painting=!1}},{key:"drawCircle",value:function(t,e,i){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t,e,i,0,2*Math.PI),this.ctx.fill(),this.clear&&(this.ctx.clip(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore())}},{key:"drawLine",value:function(t,e,i,n){this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.clear?(this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.stroke(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.closePath(),this.ctx.clip(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore()):(this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.stroke(),this.ctx.closePath())}},{key:"cleaning",value:function(){this.clear=!0}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"undo",value:function(){if(this.history.length<1)return!1;this.ctx.putImageData(this.history[this.history.length-1],0,0),this.history.pop()}},{key:"saveData",value:function(t){10===this.history.length&&this.history.shift(),this.history.push(t)}},{key:"changeLine",value:function(t){this.lineWidth=t}},{key:"checkPen",value:function(){this.clear=!1}}]),t}(),f=navigator.userAgent.toLowerCase(),x=f.indexOf("chrome")>-1,w=f.indexOf("safari")>-1,b=f.indexOf("firefox")>-1,g=!!window.ActiveXObject||"ActiveXObject"in window;console.log(f,x,w,b,g);var j={download:function(t,e){this.downloadFile(t,e)},downloadFile:function(t,e){var i=document.createElement("a"),n=this.base64ToBlob(e);document.createEvent("HTMLEvents").initEvent("click",!0,!0),i.download=t,i.href=URL.createObjectURL(n),i.click()},base64ToBlob:function(t){for(var e=t.split(";base64,"),i=e[0].split(":")[1],n=window.atob(e[1]),a=n.length,s=new Uint8Array(a),c=0;c<a;++c)s[c]=n.charCodeAt(c);return new Blob([s],{type:i})}},y=function(t){Object(r.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(o.a)(this,i),(n=e.call(this,t)).draw="",n.state={SliderValue:2},n}return Object(h.a)(i,[{key:"componentDidMount",value:function(){this.draw=new v({element:"draw"}),this.draw.init()}},{key:"sliderChange",value:function(t){this.setState({SliderValue:t.target.value}),this.draw.changeLine(this.state.SliderValue)}},{key:"download",value:function(){var t=document.getElementById("draw").toDataURL("image/png");j.download("image",t)}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("div",{className:"draw-content",children:[Object(u.jsx)("canvas",{id:"draw"}),Object(u.jsxs)("div",{className:"operating-btn-list",children:[Object(u.jsx)("button",{onClick:function(){return t.download()},children:"\u4e0b\u8f7d"}),Object(u.jsx)("button",{onClick:function(){return t.draw.checkPen()},children:"\u753b\u7b14"}),Object(u.jsx)("button",{onClick:function(){return t.draw.cleaning()},children:"\u6a61\u76ae\u64e6"}),Object(u.jsx)("button",{onClick:function(){return t.draw.undo()},children:"\u64a4\u9500"}),Object(u.jsx)("button",{onClick:function(){return t.draw.reset()},children:"\u91cd\u7ed8"}),Object(u.jsx)("div",{className:"range-set",children:Object(u.jsx)(d,{change:function(e){t.sliderChange(e)},max:"12",min:"1",value:this.state.SliderValue})})]})]})}}]),i}(a.a.Component);c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ad439369.chunk.js.map